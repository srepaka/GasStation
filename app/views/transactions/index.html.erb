<h1>List of transactions</h1>

<%= link_to 'New Transaction', new_transaction_path %>

<h2>Credits</h2>

<table>
	<tr>
		<th>Accounting Date</th>
		<th>Transaction Date</th>
		<th>Description</th>
		<th>Category</th>
		<th>Amount</th>
		<th colspan="3"></th>
	</tr>

	<% @credit_transactions.each do |transaction| %>
		<tr>
			<td><%= transaction.accounting_date =%></td>
			<td><%= transaction.transaction_date =%></td>
			<td><%= transaction.description =%></td>
			<td><%= transaction.entry_category.category =%></td>
			<td><%= transaction.amount =%></td>
			<td><%= link_to 'Edit', edit_transaction_path(transaction) %></td>
			<td><%= link_to 'Delete', transaction_path(transaction),
				method: :delete,
				data: { confirm: 'Are you sure?' } %></td>	
		</tr>
	<% end %>

	<tr>
		<td colspan="3"></th>
		<td><b>Total Credits</b></th>
		<td><b><%= @credit_transactions.sum(:amount) %></b></th>
	</tr>
</table>

<h2>Debits</h2>

<table>
        <tr>
                <th>Accounting Date</th>
                <th>Transaction Date</th>
                <th>Description</th>
                <th>Category</th>
                <th>Amount</th>
                <th colspan="3"></th>
        </tr>

        <% @debit_transactions.each do |transaction| %>
                <tr>
                        <td><%= transaction.accounting_date =%></td>
                        <td><%= transaction.transaction_date =%></td>
                        <td><%= transaction.description =%></td>
                        <td><%= transaction.entry_category.category =%></td>
                        <td><%= transaction.amount =%></td>
                        <td><%= link_to 'Edit', edit_transaction_path(transaction) %></td>
                        <td><%= link_to 'Delete', transaction_path(transaction),
                                method: :delete,
                                data: { confirm: 'Are you sure?' } %></td>      
                </tr>
        <% end %>

	<tr>
		<td colspan="3"></th>
		<td><b>Total Debits</b></th>
		<td><b><%= @debit_transactions.sum(:amount) %></b></th>
	</tr>
</table>


<%= link_to 'Back to home', root_path %>
